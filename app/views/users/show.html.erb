<% content_for :title do %>
  Profile - User
<% end %>
<section class="hero is-dark is-halfheight">
  <div class="hero-body">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-6-table is-10-desktop is-8-widescreen">
          <div class="box">
            <div class="field has-text-centered">
              <strong>アカウント情報</strong>
            </div>
            <div class="box">
              <div class="field">
                <div class="user-icon-field">
                  <% if current_user.image? %>
                    <%= image_tag current_user.image.url %>
                  <% else %>
                    <%= image_tag avatar_url(current_user), class: "user-image", alt: "ユーザーアイコン" %>
                  <% end %>
                </div>
                <%= form_for :user, url: users_show_url(current_user), action: :update, method: :post do |f| %>
                  <div class="file">
                    <label class="button is-primary is-outlined is-fullwidth">
                      <%= f.file_field :avatar, accept: 'image/jpeg,image/gif,image/png', class: "file-input", onchange: "this.form.submit();" %>
                      <i class="fas fa-upload"></i>&nbsp;&nbsp;&nbsp;アイコン画像の変更
                    </label>
                  </div>
                <% end %>
              </div>
              <div class="field">
                <span class="user-element">アカウント名: <%= current_user.name %></span>
              </div>
              <div class="field">
                <span class="user-element">調理ジャンル: <%= current_user.introduction %></span>
              </div>
              <div class="field">
                <%= link_to edit_user_registration_path do %>
                  <i class="far fa-sun"></i>
                  <span class="link-btn">setting</span>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<h2 class="page-title">投稿一覧</h2>
<div class="post-container">
  <table class="post-table">
    <tbody class="post-space">
      <% @posts.each do |post| %>
        <tr class="my-post-elements">
          <td class="post-element"><%= link_to post.title, post_path(post.id) %></td>
          <td class="post-element"><%= link_to post.post_content, post_path(post.id) %></td>
          <% unless post.avatar.blank? %>
            <td><%= image_tag post_image_url(post), class: "post-image", alt: "投稿画像" %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
